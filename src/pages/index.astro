---
import Layout from '../layouts/Layout.astro';
import SearchBar from '../components/SearchBar.astro';
import FilterPanel from '../components/FilterPanel.astro';
import BookGrid from '../components/BookGrid.astro';
import { getAllBooks } from '../utils/dataHelpers.js';

// Get first 6 books for preloading critical images
const allBooks = getAllBooks();
const criticalBooks = allBooks.slice(0, 6);
---

<Layout title="North Point Publishing - Catalog" description="Browse our collection of classic genre fiction from the golden age of pulp publishing">
	<!-- Preload critical images for faster loading -->
	{criticalBooks.map(book => (
		<link slot="head" rel="preload" as="image" href={book.cover_image} />
	))}

	<div class="container">
		<div class="intro">
			<h1>Catalog Directory</h1>
			<p>Explore our collection of timeless genre fiction from the golden age of pulp publishing.</p>
		</div>
		
		<SearchBar />
		<FilterPanel />
		<BookGrid />
	</div>
</Layout>

<style>
	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 20px;
	}

	.intro {
		text-align: center;
		margin-bottom: 1.5rem;
	}

	.intro h1 {
		color: #000000;
		font-size: 2rem;
		margin-bottom: 0.5rem;
		font-family: 'Times New Roman', serif;
	}

	.intro p {
		color: #666666;
		font-size: 1rem;
		font-style: italic;
		max-width: 800px;
		margin: 0 auto;
		line-height: 1.4;
		white-space: nowrap;
	}

	@media (max-width: 768px) {
		.intro h1 {
			font-size: 1.8rem;
		}
		
		.intro p {
			font-size: 0.9rem;
			white-space: nowrap;
		}
		
		.container {
			padding: 0 15px;
		}
	}
</style>
